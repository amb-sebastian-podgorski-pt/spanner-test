{"version":3,"file":"fetch_wallets.test.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNA,MAAM,oBAA4B;;;ACAlC,MAAM,2BAA4B;;ACAlC,MAAM,yBAA4B;;;ACAlC,MAAM,oBAA4B;;ACAlC,MAAM,wBAA4B;;;ACAP;AACF;AAEU;AACC;AACpC;AACqE;AAErE,IAAMK,YAAY,GAAGC,KAAK,CAACD,YAAY,+DAA+D;AAMtG,SAASE,YAAYA,CAAA,EAAe;EAChC,OAAO,IAAIJ,gCAAW,CAAC,SAAS,EAAE,YAAY;IAC1C,OAAOC,wBAAe,CAACK,IAAI,cAAc,CAAC,EAAE;MAACC,MAAM,EAAE;IAAI,CAAC,CAAC,CAACC,IAAI;EACpE,CAAC,CAAC;AACN;AAEA,IAAMA,IAAI,GAAGJ,YAAY,CAAC,CAAC;AAE3B,SAASK,WAAWA,CAACC,QAAgB,EAAE;EACnC,OAAOb,kBAAQ,IAAAe,MAAA,CAAIV,YAAY,eAAAU,MAAA,CAAYF,QAAQ,eAAY;IAC3DG,OAAO,EAAE;MACL,QAAQ,EAAE;IACd,CAAC;IAAEC,IAAI,EAAE;MACLC,IAAI,EAAE;IACV;EACJ,CAAC,CAAC;AACN;AAEO,IAAIC,OAAgB,GAAG;EAC1BC,SAAS,EAAE;IACPC,OAAO,EAAE;MACLC,QAAQ,EAAE,mBAAmB;MAC7BC,GAAG,EAAE,EAAE;MACPC,UAAU,EAAE,MAAM;MAClBC,WAAW,EAAE;IACjB;EACJ,CAAC;EACDC,UAAU,EAAE;IACRC,iBAAiB,EAAE,CAAC,WAAW,CAAC;IAChCC,eAAe,EAAE,CAAC,WAAW;EACjC;AAEJ,CAAC;AAED,yDAAe,YAAM;EACjB,IAAMC,YAAY,GAAG3B,8BAAiB,CAAC4B,mBAAmB;EAC1D,IAAMjB,QAAgB,GAAGF,IAAI,CAACkB,YAAY,CAAC,CAACE,EAAE;EAC9C,IAAMC,GAAG,GAAGpB,WAAW,CAACC,QAAQ,CAAC;;EAEjC;;EAEAZ,qCAAK,CAAC+B,GAAG,EAAE;IACP,eAAe,EAAE,SAAAC,YAAA;MAAA,OAAMD,GAAG,CAACE,MAAM,KAAK,GAAG;IAAA;IACzC,sBAAsB,EAAE,SAAAC,kBAAA,EAAM;MAC1B,IAAI;QACA,IAAMC,IAAI,GAAGC,IAAI,CAAC7B,KAAK,CAACwB,GAAG,CAACI,IAAc,CAAC;QAC3C,OAAOA,IAAI;MACf,CAAC,CAAC,OAAAE,OAAA,EAAM;QACJ,OAAO,KAAK;MAChB;IACJ;EACJ,CAAC,CAAC;AACN,CAAC,E","sources":["webpack://typescript/webpack/bootstrap","webpack://typescript/webpack/runtime/compat get default export","webpack://typescript/webpack/runtime/define property getters","webpack://typescript/webpack/runtime/hasOwnProperty shorthand","webpack://typescript/webpack/runtime/make namespace object","webpack://typescript/external commonjs \"k6/http\"","webpack://typescript/external commonjs \"k6\"","webpack://typescript/external commonjs \"k6/execution\"","webpack://typescript/external commonjs \"k6/data\"","webpack://typescript/external commonjs \"https://jslib.k6.io/papaparse/5.1.1/index.js\"","webpack://typescript/./src/fetch_wallets.test.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6/http\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6/execution\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6/data\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"https://jslib.k6.io/papaparse/5.1.1/index.js\");","import http from \"k6/http\";\nimport {check} from \"k6\";\nimport {Options} from \"k6/options\";\nimport scenario from 'k6/execution'\nimport {SharedArray} from \"k6/data\";\n// @ts-ignore\nimport papaparse from 'https://jslib.k6.io/papaparse/5.1.1/index.js';\n\nconst API_BASE_URL = __ENV.API_BASE_URL || `https://perftest-371677414206.europe-central2.run.app/api`;\n\ninterface PersonId {\n    id: string\n}\n\nfunction getPersonIds(): PersonId[] {\n    return new SharedArray('persons', function () {\n        return papaparse.parse(open(`persons.csv`), {header: true}).data\n    });\n}\n\nconst data = getPersonIds();\n\nfunction fetchWallet(personId: string) {\n    return http.get(`${API_BASE_URL}/persons/${personId}/wallets`, {\n        headers: {\n            'Accept': 'application/json',\n        }, tags: {\n            name: 'fetchWallet'\n        }\n    })\n}\n\nexport let options: Options = {\n    scenarios: {\n        persons: {\n            executor: 'shared-iterations',\n            vus: 50,\n            iterations: 100000,\n            maxDuration: '5m'\n        }\n    },\n    thresholds: {\n        http_req_duration: ['p(95)<500'],\n        http_req_failed: ['rate<0.01'],\n    },\n\n}\n\nexport default () => {\n    const currentIndex = scenario.scenario.iterationInInstance;\n    const personId: string = data[currentIndex].id;\n    const res = fetchWallet(personId);\n\n    // console.log(personId)\n\n    check(res, {\n        'status is 200': () => res.status === 200,\n        'wallet data is valid': () => {\n            try {\n                const body = JSON.parse(res.body as string);\n                return body;\n            } catch {\n                return false;\n            }\n        },\n    });\n};"],"names":["http","check","scenario","SharedArray","papaparse","API_BASE_URL","__ENV","getPersonIds","parse","open","header","data","fetchWallet","personId","get","concat","headers","tags","name","options","scenarios","persons","executor","vus","iterations","maxDuration","thresholds","http_req_duration","http_req_failed","currentIndex","iterationInInstance","id","res","statusIs200","status","walletDataIsValid","body","JSON","_unused"],"sourceRoot":""}